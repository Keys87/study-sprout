<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="shortcut icon" href="../public/logo-trans.png" type="image/x-icon" />
  <link rel="stylesheet" href="../out.css" />
  <title>Study Sprout</title>
</head>

<body class="p-0 m-0 flex w-screen h-screen flex-col text-main font-main bg-grad-two" id="body">

  <nav class=" w-screen py-8 flex justify-center items-center flex-row bg-grad-two shadow-xl shadow-shadow">

    <div class="flex-auto ms-2">
      <a href="../index.html">
        <img src="../public/logo-trans.png" alt="Logo/Home Button" class="h-16 w-auto object-contain" />
      </a>
    </div>

    <div class="flex flex-auto justify-center">
      <a href="../rss.html" class="p-1 text-main font-main underline hover:font-bold">Resources</a>
      <a href="../updates.html" class="p-1 text-main font-main underline hover:font-bold">Updates</a>
      <a href="../contact.html" class="p-1 text-main font-main underline hover:font-bold">Contact Us</a>
    </div>

    <div class="flex-auto h-full"></div>
  </nav>

  <section class="flex flex-row mt-6 w-screen justify-center" id="universe">
    <ul class="flex flex-col list-none text-center items-center">
      <li class="mt-2">
        <h1 class="font-bold text-4xl">Subjects in CIE IGCSE</h1>
      </li>
      <li class="mt-2">
        <div class="list-none grid grid-cols-2 gap-4 text-center" id="subjects">
          <!-- This script is for rendering subject buttons -->
          <script type="module">
            import { subjects } from "../public/subjects.js"; // PLEASE DON'T DELETE, this is the module that stores the subjects and resources data

            let parent = document.getElementById("subjects")
            const subjectApplicator = (subject, id) => {
              // this function creates ready-to-insert HTML inside of strings by using JS template strings

              const element = `<button type="button" id="${id}"  class="w-36 md:w-48 md:h-20 p-2 lg:w-72 lg:h-24 rounded-2xl shadow-lg transition transform bg-linear-to-r from-[#dde6ef] to-[#cfd9e2] text-main hover:shadow-2xl hover:scale-110 hover:from-[#f5d8cc] hover:to-[#e3c7bc] inline-flex items-center justify-center">${subject}</button>`
              return element
            }

            subjects["CIE IGCSE"].forEach((element, i) => { // this code render the subjects button grid
              parent.insertAdjacentHTML("beforeend", subjectApplicator(element.subject, i))
              i++
            });
          </script>
        </div>
      </li>
    </ul>
  </section>
  <!-- This script is for giving function to each buttons -->
  <script type="module">
    import { renderButtons } from "../scripts/subject-rss.js";

    // the variable 'parent' do not need to be redeclared here since HTML 
    // took two scripts tag as one module 

    const universe = document.getElementById("universe")
    parent = document.getElementById("subjects")

    const loader = async (rss) => {
      const res = await fetch(rss)
      console.log(res)
      return res.text() // this returns the content of the response, which is a JS promise
    }

    const templatePromise = loader("../public/subject-rss.html")
    for (let i = 0; i < parent.childElementCount - 1; i++) {
      const element = document.getElementById(i.toString())
      element.addEventListener("click", function () {

        // GENERAL USAGE OF THIS CODE
        // using a template page fetched from the server
        // make a resources list dynamically using JS and subjects.js

        /*current code(Sky, 5 Dec 2025 12:12)
        when clicking one of the subjects button,
        the HTML will be swapped with an already-fetched HTML from subject-rss.html
        I recommend for you to start making the presentation of the resources
        btw, I imagine the resources each will have three columns
        
        1st to navigate to each resource
        2nd to present the description
        3rd for the link

        you can already see this structure in the HTML with the 3-column grid
        */

        console.log(`clicked ${this.innerHTML}`)
        console.log(templatePromise.then(v => console.log(v)))
        console.log(this.innerText)
        window.appState = { "currentSubject": this.innerText, "currentResource": "" }
        templatePromise.then(value => { universe.innerHTML = value; renderButtons() })
        // you need to use .then() function to access the value of a promise


      })
    }
  </script>

</body>

</html>