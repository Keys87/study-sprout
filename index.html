<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="shortcut icon" href="public/logo-trans.png" type="image/x-icon" />
  <link rel="stylesheet" href="out.css" />
  <title>Study Sprout | Home</title>
</head>

<body
  class="p-0 m-0 flex w-screen h-screen flex-col md:flex-row text-main font-primary-text bg-primary-bg overflow-scroll">

  <!-- Sidebar (Your existing Navigation) -->
  <nav class="flex md:flex-col flex-row h-fit md:h-screen md:w-56 md:p-2 md:gap-2 w-screen items-center bg-primary-bg shadow-xl shadow-shadow">
    <!-- Logo -->
    <div class="ms-4 my-4">
      <a href="index.html">
        <img src="public/logo-trans.png" class="h-12 md:h-16 w-auto" />
      </a>
    </div>

    <!-- Links with icons -->
    <div class="flex md:flex-col flex-row items-center gap-8 text-center">
      <a href="opportunities.html" class="flex flex-col items-center gap-2 text-main hover:font-bold transition group">
        <img src="public/icons/door-open.svg" alt="Opportunities"
          class="h-8 w-8 object-contain group-hover:scale-110 transition" />
        <span class="text-xs md:text-base">Opportunities</span>
      </a>
      <a href="contact.html" class="flex flex-col items-center gap-2 text-main hover:font-bold transition group">
        <img src="public/icons/telephone.svg" alt="Contact Us"
          class="h-8 w-8 object-contain group-hover:scale-110 transition" />
        <span class="text-xs md:text-base">Contact Us</span>
      </a>
    </div>
  </nav>

  <!-- Main Content Area -->
  <main class="h-screen flex flex-col w-full items-center justify-center relative overflow-scroll">

    <!-- Background Logo Decor (Lower opacity so it doesn't distract) -->
    <img src="public/logo-trans.png" class="absolute opacity-5 w-1/2 pointer-events-none" alt="" />

    <!-- THE SELECTOR INTERFACE (Dropdown Prime) -->
    <div class="z-10 w-full max-w-4xl flex flex-col items-center animate-in fade-in zoom-in duration-700">

      <header class="text-center mb-10">
        <h1 class="text-4xl md:text-6xl font-black tracking-tighter text-slate-800 mb-4">
          Study <span class="text-main">Sprout</span>
        </h1>
        <p class="text-slate-500 text-lg md:text-xl font-medium">Choose your path to academic excellence.</p>
      </header>

      <!-- Dropdown Prime & A Container -->
      <div class="flex flex-col md:flex-row gap-6 items-center justify-center w-full">

        <!-- Dropdown Prime: Curriculum -->
        <div class="relative group w-72">
          <label
            class="text-[10px] font-bold uppercase tracking-[0.2em] text-slate-400 mb-2 block ml-2">Curricula</label>
          <button id="prime-btn"
            class="w-full h-20 px-6 rounded-xl shadow-lg flex items-center justify-between hover:shadow-2xl transition bg-linear-to-r from-primary to-primary-var1 hover:from-tertiary-var1 hover:to-tertiary-var2">
            <span id="prime-label" class="text-xl font-bold">Select Curriculum</span>
            <svg class="w-6 h-6 text-main" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>

          <div id="prime-menu"
            class="hidden absolute top-full left-0 right-0 mt-3 p-2 bg-primary rounded-xl shadow-2xl border border-primary-text z-50">
            <button data-value="IBDP"
              class="prime-opt w-full text-left p-4  bg-linear-to-r bg-primary hover:from-tertiary-var1 hover:to-tertiary-var2 rounded-xl font-bold transition">IBDP</button>
            <button data-value="CIE IGCSE"
              class="prime-opt w-full text-left p-4 bg-linear-to-r bg-primary hover:from-tertiary-var1 hover:to-tertiary-var2 rounded-xl font-bold transition">CIE
              IGCSE</button>
            <button data-value="A-Levels"
              class="prime-opt w-full text-left p-4 bg-linear-to-r bg-primary hover:from-tertiary-var1 hover:to-tertiary-var2 rounded-xl font-bold transition">A-Levels</button>
            <button data-value="SAT"
              class="prime-opt w-full text-left p-4 bg-linear-to-r bg-primary hover:from-tertiary-var1 hover:to-tertiary-var2 rounded-xl font-bold transition">SAT</button>
            <button data-value="IELTS"
              class="prime-opt no-sub w-full text-left p-4 bg-linear-to-r bg-primary hover:from-tertiary-var1 hover:to-tertiary-var2 rounded-xl font-bold transition">IELTS</button>
          </div>
        </div>

        <!-- Arrow Decor (Visible on desktop) -->
        <div class="hidden md:block text-slate-300 mt-6">
          <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5l7 7-7 7M5 5l7 7-7 7"></path>
          </svg>
        </div>

        <!-- Dropdown A: Subjects (Populated dynamically) -->
        <div id="subject-container" class="opacity-20 pointer-events-none transition-all duration-500 w-72">
          <label class="text-[10px] font-bold uppercase tracking-[0.2em] text-slate-400 mb-2 block ml-2">Subject</label>
          <div class="relative">
            <button id="subject-btn"
              class="w-full h-20 px-6 rounded-xl shadow-lg flex items-center justify-between hover:shadow-2xl transition bg-linear-to-r from-primary to-primary-var1 hover:from-tertiary-var1 hover:to-tertiary-var2">
              <span id="subject-label" class="text-xl font-bold text-slate-400">Select Subject</span>
              <svg class="w-6 h-6 text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>

            <div id="subject-menu"
              class="hidden absolute top-full left-0 right-0 mt-3 p-2 bg-primary rounded-xl shadow-2xl border border-primary-text z-50 max-h-64 overflow-y-auto custom-scrollbar">
              <!-- Subjects will be injected here -->
            </div>
          </div>
        </div>

      </div>

      <!-- Informational Stats / Footer Area (Fills the empty space) -->
      <div class="mt-20 grid grid-cols-1 md:grid-cols-3 gap-8 w-full max-w-3xl">
        <div class="text-center">
          <h4 class="text-3xl font-black text-main">500+</h4>
          <p class="text-sm font-bold text-slate-400 uppercase tracking-widest">Resources</p>
        </div>
        <div class="text-center border-x-0 md:border-x border-slate-200">
          <h4 class="text-3xl font-black text-main">20+</h4>
          <p class="text-sm font-bold text-slate-400 uppercase tracking-widest">Subjects</p>
        </div>
        <div class="text-center">
          <h4 class="text-3xl font-black text-main">4</h4>
          <p class="text-sm font-bold text-slate-400 uppercase tracking-widest">Curricula</p>
        </div>
      </div>

    </div>
  </main>

  <script type="module">
    import { subjects } from "./public/subjects.js";

    // Selectors
    const primeBtn = document.getElementById('prime-btn');
    const primeMenu = document.getElementById('prime-menu');
    const primeLabel = document.getElementById('prime-label');

    const subjectContainer = document.getElementById('subject-container');
    const subjectBtn = document.getElementById('subject-btn');
    const subjectMenu = document.getElementById('subject-menu');
    const subjectLabel = document.getElementById('subject-label');

    // 1. Prime Menu Logic
    primeBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      primeMenu.classList.toggle('hidden');
      subjectMenu.classList.add('hidden');
    });

    document.querySelectorAll('.prime-opt').forEach(opt => {
      opt.addEventListener('click', function () {
        const curriculum = this.dataset.value;
        primeLabel.innerText = curriculum;
        primeMenu.classList.add('hidden');
        console.log(curriculum)

        // Unlock Subject Dropdown
        if (!this.classList.contains('no-sub')) {
                  subjectContainer.classList.remove('opacity-20', 'pointer-events-none');
                  subjectBtn.querySelector('svg').classList.replace('text-slate-300', 'text-main');
                  subjectLabel.classList.remove('text-slate-400');
                  subjectLabel.innerText = "Select Subject";
        } else {
          
          window.location.href = `result.html?curr=${encodeURIComponent(curriculum)}&subject=${encodeURIComponent(curriculum)}`
        }
        populateSubjects(curriculum);
      });
    });

    // 2. Populate Dropdown A (Subjects)
    function populateSubjects(curriculumName) {
      subjectMenu.innerHTML = '';
      const list = subjects[curriculumName] || [];

      list.forEach(item => {
        const btn = document.createElement('button');
        btn.className = "w-full text-left p-4 bg-linear-to-r bg-primary hover:from-tertiary-var1 hover:to-tertiary-var2 rounded-xl font-semibold transition text-main";
        btn.innerText = item.subject;
        btn.onclick = () => {
          // Navigation logic: Redirect to the resource page with state
          // Simulate the transition to the resources page
          window.location.href = `result.html?curr=${encodeURIComponent(curriculumName)}&subject=${encodeURIComponent(item.subject)}`;
          // window.location.href = "result.html"
        };
        subjectMenu.appendChild(btn);
      });
    }

    subjectBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      subjectMenu.classList.toggle('hidden');
    });

    // Global close
    document.addEventListener('click', () => {
      primeMenu.classList.add('hidden');
      subjectMenu.classList.add('hidden');
    });
  </script>

</body>

</html>